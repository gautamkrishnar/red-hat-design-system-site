!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("../../pfelement/dist/pfelement.umd.min"),require("../../pfelement/dist/pfelement.umd")):"function"==typeof define&&define.amd?define(["../../pfelement/dist/pfelement.umd.min","../../pfelement/dist/pfelement.umd"],t):e.PfeDropdown=t(e.PFElement,e.PFElement)}(this,function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e};function n(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,o){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var n=Object.getPrototypeOf(e);return null===n?void 0:a(n,t,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=(i(s,e),r(s,[{key:"html",get:function(){return'<style>::slotted(*){display:block;width:100%;padding:calc(16px * .5) calc(16px * .5);padding:var(--pfe-dropdown--spacing--vertical,var(--pfe-dropdown--SpacingHorizontal,calc(var(--pfe-theme--container-padding,16px) * .5))) var(--pfe-dropdown--spacing--horizontal,var(--pfe-dropdown--SpacingHorizontal,calc(var(--pfe-theme--container-padding,16px) * .5)));color:#030303;color:var(--pfe-dropdown--Color,#030303);font-size:16px;font-size:var(--pfe-dropdown--FontSize,var(--pfe-theme--font-size,16px));font-weight:400;font-weight:var(--pfe-dropdown--FontWeight,400);line-height:1.5;line-height:var(--pfe-dropdown--LineHeight,var(--pfe-theme--line-height,1.5));text-align:left;text-align:var(--pfe-dropdown--TextAlign,left);white-space:nowrap;-webkit-box-sizing:border-box;box-sizing:border-box;text-decoration:none;font-family:inherit;font-family:var(--pfe-theme--font-family,inherit);cursor:pointer}::slotted(button){background-color:transparent;background-color:var(--pfe-dropdown--BackgroundColor,transparent);border:none;border:var(--pfe-dropdown--Border,none)}.pfe-dropdown-item__container:active,.pfe-dropdown-item__container:focus,.pfe-dropdown-item__container:hover{background-color:#f0f0f0;background-color:var(--pfe-dropdown--BackgroundColor--hover,var(--pfe-theme--color--surface--lighter,#f0f0f0));color:#151515;color:var(--pfe-dropdown--Color--hover,#151515)}:host([pfe-item-type=separator]) .pfe-dropdown-item__container{height:1px;background-color:#f0f0f0}:host([is_disabled]) .pfe-dropdown-item__container{pointer-events:none;--pfe-dropdown--Color:#6a6e73}\n/*# sourceMappingURL=pfe-dropdown-item.min.css.map */\n</style><li class="pfe-dropdown-item__container">\n  <slot></slot>\n</li>'}},{key:"templateUrl",get:function(){return"pfe-dropdown-item.html"}},{key:"styleUrl",get:function(){return"pfe-dropdown-item.scss"}},{key:"schemaUrl",get:function(){return"pfe-dropdown-item.json"}}],[{key:"version",get:function(){return"1.0.0-prerelease.55"}},{key:"properties",get:function(){return{"item-type":{title:"List item type",type:"string",enum:["link","action","separator"],default:null,prefixed:!0}}}},{key:"slots",get:function(){return{}}},{key:"tag",get:function(){return"pfe-dropdown-item"}},{key:"observedAttributes",get:function(){return["pfe-item-type","is_disabled"]}}]),r(s,[{key:"attributeChangedCallback",value:function(e,t,o){switch(e){case"pfe-item-type":this._setAccessibility();break;case"is_disabled":this._setDisabled()}}},{key:"connectedCallback",value:function(){a(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"connectedCallback",this).call(this)}},{key:"_setAccessibility",value:function(){if(this._container){var e=this.getAttribute("pfe-item-type");if(e)switch(e){case"link":this._container.setAttribute("role","none"),this._item&&this._item.setAttribute("role","menuitem");break;case"action":this._container.setAttribute("role","menuitem"),this._item&&this._item.removeAttribute("role");break;case"separator":this._container.setAttribute("role","separator")}}}},{key:"_setDisabled",value:function(){this.hasAttribute("is_disabled")?(this.removeAttribute("tabindex"),this.setAttribute("aria-disabled","true")):(this.removeAttribute("is_disabled"),this.setAttribute("tabindex","0"),this.setAttribute("aria-disabled","false"))}}]),s);function s(){o(this,s);var e=d(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,s));return e._container=e.shadowRoot.querySelector("."+e.tag+"__container"),e._item=e.shadowRoot.querySelector("slot").assignedNodes()[1],e}Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var p=40,c=35,f=13,u=27,h=36,b=37,m=39,g=38,_=9,v=(i(w,t),r(w,[{key:"html",get:function(){return'<style>:host{position:relative;display:inline-block;max-width:100%}:host(:hover:not([is_disabled])){--pfe-dropdown__before--BorderBottomColor:var(--pfe-dropdown__before--BorderBottomColor--hover, var(--pfe-dropdown--BorderBottomColor--before--hover, var(--pfe-theme--color--ui-base, #6a6e73)))}:host(:active:not([is_disabled])),:host(:focus:not([is_disabled])){--pfe-dropdown__before--BorderBottomColor:var(--pfe-dropdown__before--BorderBottomColor--hover, var(--pfe-dropdown--BorderBottomColor--before--hover, var(--pfe-theme--color--ui-base, #6a6e73)));--pfe-dropdown__before--BorderWidth:var(--pfe-dropdown__before--BorderWidth--hover, var(--pfe-dropdown--BorderWidth--before--hover, calc(var(--pfe-theme--ui--border-width, 1px) * 2)))}:host([hidden]){display:none}:host([is_disabled]){--pfe-dropdown--BackgroundColor:var(--pfe-theme--color--surface--lighter, #f0f0f0);--pfe-dropdown--BorderWidth:0}:host([is_disabled]) .pfe-dropdown__container{pointer-events:none}.pfe-dropdown__toggle{position:relative;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;min-width:calc(16px * 2);min-width:var(--pfe-dropdown--MinWidth,calc(var(--pfe-theme--container-spacer,16px) * 2));max-width:100%;max-width:var(--pfe-dropdown--MaxWidth,100%);padding:calc(16px * .5) calc(16px * .5);padding:var(--pfe-dropdown--spacing--vertical,var(--pfe-dropdown--SpacingHorizontal,calc(var(--pfe-theme--container-padding,16px) * .5))) var(--pfe-dropdown--spacing--horizontal,var(--pfe-dropdown--SpacingHorizontal,calc(var(--pfe-theme--container-padding,16px) * .5)));font-size:16px;font-size:var(--pfe-dropdown--FontSize,var(--pfe-theme--font-size,16px));font-family:inherit;font-family:var(--pfe-theme--font-family,inherit);font-weight:400;font-weight:var(--pfe-dropdown--FontWeight,400);line-height:1.5;line-height:var(--pfe-theme--line-height,1.5);color:#3c3f42;color:var(--pfe-dropdown--Color,var(--pfe-broadcasted--text,#3c3f42));background-color:transparent;background-color:var(--pfe-dropdown--BackgroundColor,transparent);border:none;border:var(--pfe-dropdown--Border,none);cursor:pointer}.pfe-dropdown__toggle::before{position:absolute;top:0;right:0;bottom:0;left:0;content:"";border-width:1px;border-width:var(--pfe-dropdown__before--BorderWidth,var(--pfe-dropdown--BorderWidth--before,var(--pfe-theme--ui--border-width,1px)));border-style:solid;border-style:var(--pfe-dropdown__before--BorderStyle,var(--pfe-dropdown--BorderStyle--before,var(--pfe-theme--ui--border-style,solid)));border-top-color:#f0f0f0;border-top-color:var(--pfe-dropdown__before--BorderTopColor,var(--pfe-dropdown--BorderTopColor--before,var(--pfe-theme--color--surface--lighter,#f0f0f0)));border-right-color:#f0f0f0;border-right-color:var(--pfe-dropdown__before--BorderRightColor,var(--pfe-dropdown--BorderRightColor--before,var(--pfe-theme--color--surface--lighter,#f0f0f0)));border-bottom-color:#6a6e73;border-bottom-color:var(--pfe-dropdown__before--BorderBottomColor,var(--pfe-dropdown--BorderBottomColor--before,var(--pfe-theme--color--surface--border--darker,#6a6e73)));border-left-color:#f0f0f0;border-left-color:var(--pfe-dropdown__before--BorderLeftColor,var(--pfe-dropdown--BorderLeftColor--before,var(--pfe-theme--color--surface--lighter,#f0f0f0)))}.pfe-dropdown__toggle-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.pfe-dropdown__toggle-icon{vertical-align:calc(16px * -.125);vertical-align:calc(var(--pfe-theme--container-spacer,16px) * -.125);fill:currentColor;height:1em;height:var(--pfe-theme--icon-size,1em);width:var(--pfe-dropdown__toggle-icon--Width);margin-right:calc(16px * .5);margin-right:calc(var(--pfe-theme--container-spacer,16px) * .5);margin-left:16px;margin-left:var(--pfe-theme--container-spacer,16px);line-height:1.5;line-height:var(--pfe-theme--line-height,1.5)}.pfe-dropdown__menu{display:none;position:absolute;top:calc(100% + .25rem);z-index:97;z-index:var(--pfe-theme--zindex--overlay,97);padding:var(--pfe-dropdown__menu--spacing--vertical) 0;padding:var(--pfe-dropdown__menu--spacing--vertical) var(--pfe-dropdown__menu--spacing--horizontal,var(--pfe-dropdown--SpacingHorizontal,0));margin:0;margin:var(--pfe-dropdown__menu--Margin,0);background:#fff;background:var(--pfe-dropdown__menu--BackgroundColor,var(--pfe-theme--color--surface--lightest,#fff));background-clip:padding-box;border-width:1px;border-width:var(--pfe-dropdown__menu--BorderWidth,var(--pfe-theme--ui--border-width,1px));border-style:solid;border-style:var(--pfe-dropdown__menu--BorderStyle,var(--pfe-theme--ui--border-style,solid));border-color:transparent;border-color:var(--pfe-dropdown__menu--BorderColor,transparent);-webkit-box-shadow:0 .0625rem .125rem 0 rgba(3,3,3,.2);box-shadow:0 .0625rem .125rem 0 rgba(3,3,3,.2);-webkit-box-shadow:var(--pfe-dropdown__menu--BoxShadow,var(--pfe-theme--box-shadow--sm,0 .0625rem .125rem 0 rgba(3,3,3,.2)));box-shadow:var(--pfe-dropdown__menu--BoxShadow,var(--pfe-theme--box-shadow--sm,0 .0625rem .125rem 0 rgba(3,3,3,.2)));list-style:none;-webkit-box-sizing:border-box;box-sizing:border-box;min-width:100%;min-width:var(--pfe-dropdown__menu--MinWidth,100%)}.pfe-dropdown__menu.open{display:block}\n/*# sourceMappingURL=pfe-dropdown.min.css.map */\n</style><div class="pfe-dropdown__container">\n  <button class="pfe-dropdown__toggle" type="button" aria-haspopup="menu" aria-controls="pfe-dropdown-menu"\n    id="pfe-dropdown-toggle">\n    <span class="pfe-dropdown__toggle-text"></span>\n    <svg class="pfe-dropdown__toggle-icon" viewBox="0 0 320 512" aria-hidden="true" role="img">\n      <path\n        d="M31.3 192h257.3c17.8 0 26.7 21.5 14.1 34.1L174.1 354.8c-7.8 7.8-20.5 7.8-28.3 0L17.2 226.1C4.6 213.5 13.5 192 31.3 192z">\n      </path>\n    </svg>\n  </button>\n  <ul class="pfe-dropdown__menu" role="menu" aria-labelledby="pfe-dropdown-toggle" id="pfe-dropdown-menu">\n    <slot></slot>\n  </ul>\n</div>'}},{key:"templateUrl",get:function(){return"pfe-dropdown.html"}},{key:"styleUrl",get:function(){return"pfe-dropdown.scss"}},{key:"schemaUrl",get:function(){return"pfe-dropdown.json"}},{key:"pfeDropdownOptions",set:function(e){this._modifyDOM(e)}}],[{key:"version",get:function(){return"1.0.0-prerelease.55"}},{key:"properties",get:function(){return{label:{title:"Menu button label",type:"string",default:"Dropdown",prefixed:!0},is_disabled:{title:"Disable menu button",type:"boolean",default:!1,prefixed:!1}}}},{key:"slots",get:function(){return{}}},{key:"tag",get:function(){return"pfe-dropdown"}},{key:"observedAttributes",get:function(){return["pfe-label","is_disabled"]}},{key:"events",get:function(){return{change:this.tag+":change"}}}]),r(w,[{key:"connectedCallback",value:function(){var e=this;a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"connectedCallback",this).call(this),document.addEventListener("click",this._outsideClickHandler),Promise.all([customElements.whenDefined(w.tag),customElements.whenDefined(l.tag)]).then(function(){e._init()})}},{key:"disconnectedCallback",value:function(){var t=this;this._toggle.removeEventListener("click",this._clickHandler),this._toggle.removeEventListener("keydown",this._toggleKeydownHandler),this._allItems().forEach(function(e){e.removeEventListener("keydown",t._itemKeydownHandler),e.removeEventListener("click",t._itemClickHandler)})}},{key:"attributeChangedCallback",value:function(e,t,o){switch(e){case"pfe-label":this._toggle_text.textContent=o;break;case"is_disabled":this._setDisabled()}}},{key:"_init",value:function(){var t=this;this.children.length&&(this.hasAttribute("is_disabled")||(this._toggle.addEventListener("click",this._clickHandler),this._toggle.addEventListener("keydown",this._toggleKeydownHandler),this._allItems().forEach(function(e){e.addEventListener("keydown",t._itemKeydownHandler),e.addEventListener("click",t._itemClickHandler)})))}},{key:"_clickHandler",value:function(e){return this.isOpen?this.close(e):this.open(e),this}},{key:"_itemClickHandler",value:function(e){var t=void 0;return e.target.parentElement.attributes["pfe-item-type"]&&(t=e.target.parentElement.attributes["pfe-item-type"].value),this._selectItem(e.target,t),this}},{key:"_itemKeydownHandler",value:function(e){var t=void 0,o=void 0;e.target.attributes["pfe-item-type"]&&(o=e.target.attributes["pfe-item-type"].value);var r=this._allItems().findIndex(function(e){return e===document.activeElement});switch(e.keyCode){case f:this._selectItem(e.target.children[0],o);break;case u:this.close(e);break;case m:case p:t=this._itemContainer(this._nextItem(r,1));break;case b:case g:t=this._itemContainer(this._nextItem(r,-1));break;case h:t=this._firstItem();break;case c:t=this._lastItem();break;case _:this.close()}return t&&(t.setAttribute("tabindex","-1"),t.focus()),this}},{key:"_outsideClickHandler",value:function(e){var t=e.target===this,o=e.target.closest("pfe-dropdown"),r=-1<e.target.tagName.indexOf("-")?e.target.shadowRoot.querySelector("pfe-dropdown"):null;t||o||r||this.close()}},{key:"_toggleKeydownHandler",value:function(e){switch(e.keyCode){case f:case p:if(this._allDisabled())this.toggle(e);else{this.open();var t=this._itemContainer(this._nextItem(-1,1));t.setAttribute("tabindex","-1"),t.focus()}break;case _:this.close()}return this}},{key:"_modifyDOM",value:function(e){var r=this;e.forEach(function(e){var t=void 0;switch(e.type){case"link":(t=document.createElement("a")).setAttribute("href",e.href?e.href:"#");break;case"action":t=document.createElement("button")}var o=document.createElement("pfe-dropdown-item");o.setAttribute("pfe-item-type",e.type),e.is_disabled&&o.setAttribute("is_disabled",e.is_disabled),t&&(t.innerText=e.text?e.text:"",o.appendChild(t)),r.appendChild(o)})}},{key:"_setDisabled",value:function(){this.hasAttribute("is_disabled")?(this.setAttribute("aria-disabled","true"),this.setAttribute("tabindex","-1")):(this.removeAttribute("is_disabled"),this.setAttribute("aria-disabled","false"),this.removeAttribute("tabindex"))}},{key:"_allItems",value:function(){return[].concat(function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}(this.querySelectorAll(this.tag+"-item:not([pfe-item-type='separator'])")))}},{key:"_allDisabled",value:function(){return void 0===this._allItems().find(function(e){return!e.hasAttribute("is_disabled")})}},{key:"_nextItem",value:function(e,t){for(var o=this._allItems(),r=(e+t)%o.length,n=o[r=r<0?r+o.length:r];n&&n.hasAttribute("is_disabled");)n=o[(r+=t)%o.length];return n}},{key:"_firstItem",value:function(){return this._allItems()[0]}},{key:"_lastItem",value:function(){var e=this._allItems();return e[e.length-1]}},{key:"_selectItem",value:function(e,t){"action"===t?(this.emitEvent(w.events.change,{detail:{action:e.innerText}}),this.close(event)):e.click()}},{key:"addDropdownOptions",value:function(e){this._modifyDOM(e)}},{key:"open",value:function(e){return e&&e.preventDefault(),this.isOpen=!0,this._menu.classList.add("open"),this._toggle.setAttribute("aria-expanded",!0),this}},{key:"close",value:function(e){return e&&e.preventDefault(),this.isOpen=!1,this._menu.classList.remove("open"),this._toggle.setAttribute("aria-expanded",!1),this}},{key:"toggle",value:function(e){this.isOpen?this.close(e):this.open(e)}},{key:"_itemContainer",value:function(e){return e.shadowRoot.querySelector("."+this.tag+"-item__container")}}]),w);function w(){o(this,w);var e=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w));return e.isOpen=!1,e._init=e._init.bind(e),e._container=e.shadowRoot.querySelector("#"+e.tag+"-container"),e._toggle=e.shadowRoot.querySelector("#"+e.tag+"-toggle"),e._toggle_text=e._toggle.querySelector("."+e.tag+"__toggle-text"),e._menu=e.shadowRoot.querySelector("#"+e.tag+"-menu"),e.open=e.open.bind(e),e.close=e.close.bind(e),e._clickHandler=e._clickHandler.bind(e),e._toggleKeydownHandler=e._toggleKeydownHandler.bind(e),e._itemKeydownHandler=e._itemKeydownHandler.bind(e),e._itemClickHandler=e._itemClickHandler.bind(e),e._outsideClickHandler=e._outsideClickHandler.bind(e),e}return t.create(l),t.create(v),v});
//# sourceMappingURL=pfe-dropdown.umd.min.js.map
